{"ast":null,"code":"var _jsxFileName = \"/home/xilxilx/projects/distsys/alias/frontend/src/App.js\";\n// import { useState } from 'react';\nimport React, { Component } from 'react';\nimport './App.css';\n// import Frontpage from './components/Frontpage';\n// import Lobby from './components/Lobby';\nimport ChatBox from './Chatbox';\nimport socketIO from \"socket.io-client\";\nimport p2p from \"socket.io-p2p\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst socket = socketIO.connect(\"http://localhost:4000\");\nconst p2psocket = new p2p(socket, {\n  autoUpgrade: false\n});\n\n/*\nconst App = () => {\n  const [currentPage, setCurrentPage] = useState('frontpage')\n\n  const [roomName, setRoomName] = useState('')\n  const [roomNameInput, setRoomNameInput] = useState('')\n\n  console.log(roomName)\n  function handleRoomNameInputChange(event) {\n    setRoomNameInput(event.target.value)\n  }\n\n  */\n\nclass App extends Component {\n  constructor(props) {\n    var _this;\n    super(props);\n    _this = this;\n    this.addChat = function (name, message) {\n      let alert = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      _this.setState({\n        chatLog: _this.state.chatLog.concat({\n          name,\n          message: `${message}`,\n          timestamp: `${Date.now()}`,\n          alert\n        })\n      });\n      p2psocket.socket.emit('message');\n    };\n    this.state = {\n      chatLog: []\n    };\n  }\n  render() {\n    const {\n      chatLog\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(ChatBox, {\n        chatLog: chatLog,\n        onSend: msg => msg && this.addChat(socket.id, msg)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: goPrivate,\n        children: \"GO P2P\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 10\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }, this);\n  }\n}\np2psocket.on('peer-msg', function (data) {\n  // append message to list\n});\nconst goPrivate = () => {\n  console.log('going private');\n  p2psocket.emit('go-private', true);\n  p2psocket.upgrade();\n};\n\n/*\n// if no room name known yet, sets the room name and joins the room\n// if room name has been set,\n// then checks if the user entered the correct room name\n// and joins the room if correct. otherwise annoying alert\nfunction handleJoinBtnPress() {\n  if (roomName === '') {\n    if (roomNameInput.trim().length > 0) {\n      setRoomName(roomNameInput)\n      joinRoom()\n    } else {\n      console.log('Empty input')\n    }\n  } else if (roomNameInput === roomName) {\n    joinRoom()\n  } else {\n    alert('Incorrect room name')\n  }\n}\n function joinRoom() {\n  setCurrentPage('lobby')\n  console.log('you have joined the room ', roomName)\n}\n function returnToFrontpage() {\n  setCurrentPage('frontpage')\n  console.log('you have exited the room ', roomName)\n}\n if (currentPage==='frontpage') {\n  return (\n    <div className='App'>\n      <p className='spin'>Alias :3</p>\n      <Frontpage\n        handleJoinBtnPress={handleJoinBtnPress}\n        handleRoomNameInputChange={handleRoomNameInputChange}\n      />\n      <div>Room: {roomName}</div>\n    </div>\n  )\n} else if (currentPage === 'lobby') {\n  return (\n    <div className='App'>\n      <p className='spin'>Alias :3</p>\n      <Lobby\n        roomName={roomName}\n        returnToFrontpage={returnToFrontpage}\n      />\n      <div>Room: {roomName}</div>\n    </div>\n  )\n} else {\n  return (\n    <div className='App'>\n      <p className='spin'>Alias :3</p>\n      <p className='funy'>I don't know where you are</p>\n      <div>Room: {roomName}</div>\n    </div>\n  )\n}\n}\n*/\nexport default App;","map":{"version":3,"names":["React","Component","ChatBox","socketIO","p2p","socket","connect","p2psocket","autoUpgrade","App","constructor","props","addChat","name","message","alert","setState","chatLog","state","concat","timestamp","Date","now","emit","render","msg","id","goPrivate","on","data","console","log","upgrade"],"sources":["/home/xilxilx/projects/distsys/alias/frontend/src/App.js"],"sourcesContent":["// import { useState } from 'react';\nimport React, { Component } from 'react';\nimport './App.css';\n// import Frontpage from './components/Frontpage';\n// import Lobby from './components/Lobby';\nimport ChatBox from './Chatbox';\n\nimport socketIO from \"socket.io-client\"\nimport p2p from \"socket.io-p2p\"\n\nconst socket = socketIO.connect(\"http://localhost:4000\")\nconst p2psocket = new p2p(socket, {autoUpgrade: false})\n\n/*\nconst App = () => {\n  const [currentPage, setCurrentPage] = useState('frontpage')\n\n  const [roomName, setRoomName] = useState('')\n  const [roomNameInput, setRoomNameInput] = useState('')\n\n  console.log(roomName)\n  function handleRoomNameInputChange(event) {\n    setRoomNameInput(event.target.value)\n  }\n\n  */\n\n  class App extends Component {\n    constructor(props) {\n      super(props);\n      this.state = {\n        chatLog: []\n      }\n    }\n    \n\n    addChat = (name, message, alert = false) => {\n      this.setState({ chatLog: this.state.chatLog.concat({\n        name,\n        message: `${message}`,\n        timestamp: `${Date.now()}`,\n        alert\n      })});\n      p2psocket.socket.emit('message')\n    }\n    \n    render() {\n      const { chatLog } = this.state;\n      return (\n        <div className=\"App\">\n          <ChatBox\n            chatLog={chatLog}\n            onSend={(msg) => msg && this.addChat(socket.id, msg)}\n          />\n         <button onClick={goPrivate}>GO P2P</button> \n        </div>\n      );\n    }\n  }\n\n  p2psocket.on('peer-msg', function(data) {\n    // append message to list\n  });\n\n  const goPrivate = () => {\n    console.log('going private')\n    p2psocket.emit('go-private', true)\n    p2psocket.upgrade()\n  }\n\n\n\n  /*\n  // if no room name known yet, sets the room name and joins the room\n  // if room name has been set,\n  // then checks if the user entered the correct room name\n  // and joins the room if correct. otherwise annoying alert\n  function handleJoinBtnPress() {\n    if (roomName === '') {\n      if (roomNameInput.trim().length > 0) {\n        setRoomName(roomNameInput)\n        joinRoom()\n      } else {\n        console.log('Empty input')\n      }\n    } else if (roomNameInput === roomName) {\n      joinRoom()\n    } else {\n      alert('Incorrect room name')\n    }\n  }\n\n  function joinRoom() {\n    setCurrentPage('lobby')\n    console.log('you have joined the room ', roomName)\n  }\n\n  function returnToFrontpage() {\n    setCurrentPage('frontpage')\n    console.log('you have exited the room ', roomName)\n  }\n\n  if (currentPage==='frontpage') {\n    return (\n      <div className='App'>\n        <p className='spin'>Alias :3</p>\n        <Frontpage\n          handleJoinBtnPress={handleJoinBtnPress}\n          handleRoomNameInputChange={handleRoomNameInputChange}\n        />\n        <div>Room: {roomName}</div>\n      </div>\n    )\n  } else if (currentPage === 'lobby') {\n    return (\n      <div className='App'>\n        <p className='spin'>Alias :3</p>\n        <Lobby\n          roomName={roomName}\n          returnToFrontpage={returnToFrontpage}\n        />\n        <div>Room: {roomName}</div>\n      </div>\n    )\n  } else {\n    return (\n      <div className='App'>\n        <p className='spin'>Alias :3</p>\n        <p className='funy'>I don't know where you are</p>\n        <div>Room: {roomName}</div>\n      </div>\n    )\n  }\n\n}\n*/\nexport default App;\n"],"mappings":";AAAA;AACA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,OAAO,WAAW;AAClB;AACA;AACA,OAAOC,OAAO,MAAM,WAAW;AAE/B,OAAOC,QAAQ,MAAM,kBAAkB;AACvC,OAAOC,GAAG,MAAM,eAAe;AAAA;AAE/B,MAAMC,MAAM,GAAGF,QAAQ,CAACG,OAAO,CAAC,uBAAuB,CAAC;AACxD,MAAMC,SAAS,GAAG,IAAIH,GAAG,CAACC,MAAM,EAAE;EAACG,WAAW,EAAE;AAAK,CAAC,CAAC;;AAEvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEE,MAAMC,GAAG,SAASR,SAAS,CAAC;EAC1BS,WAAW,CAACC,KAAK,EAAE;IAAA;IACjB,KAAK,CAACA,KAAK,CAAC;IAAA;IAAA,KAOdC,OAAO,GAAG,UAACC,IAAI,EAAEC,OAAO,EAAoB;MAAA,IAAlBC,KAAK,uEAAG,KAAK;MACrC,KAAI,CAACC,QAAQ,CAAC;QAAEC,OAAO,EAAE,KAAI,CAACC,KAAK,CAACD,OAAO,CAACE,MAAM,CAAC;UACjDN,IAAI;UACJC,OAAO,EAAG,GAAEA,OAAQ,EAAC;UACrBM,SAAS,EAAG,GAAEC,IAAI,CAACC,GAAG,EAAG,EAAC;UAC1BP;QACF,CAAC;MAAC,CAAC,CAAC;MACJR,SAAS,CAACF,MAAM,CAACkB,IAAI,CAAC,SAAS,CAAC;IAClC,CAAC;IAdC,IAAI,CAACL,KAAK,GAAG;MACXD,OAAO,EAAE;IACX,CAAC;EACH;EAaAO,MAAM,GAAG;IACP,MAAM;MAAEP;IAAQ,CAAC,GAAG,IAAI,CAACC,KAAK;IAC9B,oBACE;MAAK,SAAS,EAAC,KAAK;MAAA,wBAClB,QAAC,OAAO;QACN,OAAO,EAAED,OAAQ;QACjB,MAAM,EAAGQ,GAAG,IAAKA,GAAG,IAAI,IAAI,CAACb,OAAO,CAACP,MAAM,CAACqB,EAAE,EAAED,GAAG;MAAE;QAAA;QAAA;QAAA;MAAA,QACrD,eACH;QAAQ,OAAO,EAAEE,SAAU;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAAgB;IAAA;MAAA;MAAA;MAAA;IAAA,QACtC;EAEV;AACF;AAEApB,SAAS,CAACqB,EAAE,CAAC,UAAU,EAAE,UAASC,IAAI,EAAE;EACtC;AAAA,CACD,CAAC;AAEF,MAAMF,SAAS,GAAG,MAAM;EACtBG,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC;EAC5BxB,SAAS,CAACgB,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC;EAClChB,SAAS,CAACyB,OAAO,EAAE;AACrB,CAAC;;AAID;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAKA,eAAevB,GAAG"},"metadata":{},"sourceType":"module"}